import React, {useEffect, useState} from "react";
import { Link } from "react-router-dom";
import {CalendarIcon, DocumentIcon, LanguageIcon, TagIcon} from "@heroicons/react/24/outline/index.js";


function NavBar() {
    const [searchText, setSearchText] = useState("");
    const [searchOption, setSearchOption] = useState(null);
    const [isDarkMode, setIsDarkMode] = useState(localStorage.getItem("theme") === "dark");

    const handleOptionSelect = (option) => {
        setSearchOption(option);
        setSearchText(option + ":");
    };

    const handleInputChange = (e) => {
        setSearchText(e.target.value);
    };

    return (
        <div className="navbar bg-base-100 px-4 py-2">
            {/* Branding */}
            <div className="flex-none">
                <Link className="btn btn-ghost text-xl" to="/">
                    <svg xmlns="http://www.w3.org/2000/svg" className="size-6" fill="none" viewBox="0 0 520 520">
                        <path fill="url(#a)" fillRule="evenodd" d="M479.36 516H516v-49h-32.237l-4.403 49Zm7.818-87 6.022-67H516v67h-28.822Zm9.437-105H516v-67h-13.364l-6.021 67ZM516 152v67h-9.948l3.999-44.503a121.62 121.62 0 0 1-29.606 15.017L475.008 219H456c-10.493 0-19 8.507-19 19s8.507 19 19 19h12.002l-12.352 67H380c-10.493 0-19 8.507-19 19s8.507 19 19 19h68.644l-28.392 154H254.824l26.908-56.689C285.195 463.977 290.744 467 297 467h92c10.493 0 19-8.507 19-19s-8.507-19-19-19h-92c-.298 0-.594.007-.889.02l112.43-236.856a121.862 121.862 0 0 1-21.117-7.713L362.851 219H219c-2.907 0-5.662.653-8.126 1.82A52230.802 52230.802 0 0 1 302.035 152H323c10.493 0 19-8.507 19-19 0-9.838-7.477-17.929-17.058-18.902-.159-.486-.315-.973-.467-1.461L321.659 114H290c-10.493 0-19 8.507-19 19 0 1.798.25 3.538.717 5.187l-192.83 93.388C76.251 224.243 69.237 219 61 219H4v-67.026c.331.017.665.026 1 .026h185c10.493 0 19-8.507 19-19s-8.507-19-19-19H5c-.335 0-.669.009-1 .026V105.5c83.89-15.372 223.218-41.41 319.762-59.528 4.484-15.524 12.135-29.75 22.229-41.972H516v110H402c-10.493 0-19 8.507-19 19s8.507 19 19 19h114ZM335.825 257H219c-10.493 0-19-8.507-19-19 0-4.786 1.769-9.158 4.69-12.499-44.733 33.862-90.062 68.306-129.496 98.499H107c10.493 0 19 8.507 19 19s-8.507 19-19 19H45a18.93 18.93 0 0 1-12.797-4.956c-10.23 7.9-19.69 15.24-28.203 21.888V516h147.616l34.85-49H146c-10.493 0-19-8.507-19-19s8.507-19 19-19h67.493l47.653-67H170c-10.493 0-19-8.507-19-19s8.507-19 19-19h118.172l47.653-67Zm-309.438 0H4v10.842L26.387 257ZM13 448c0-10.493 8.507-19 19-19h25c10.493 0 19 8.507 19 19s-8.507 19-19 19H32c-10.493 0-19-8.507-19-19Z" clipRule="evenodd"/>
                        <path fill="#FFA962" d="M516 516v4h4v-4h-4Zm-36.64 0-3.984-.358-.392 4.358h4.376v-4ZM516 467h4v-4h-4v4Zm-32.237 0v-4h-3.656l-.328 3.642 3.984.358Zm9.437-105v-4h-3.657l-.327 3.642 3.984.358Zm-6.022 67-3.983-.358-.392 4.358h4.375v-4ZM516 362h4v-4h-4v4Zm0 67v4h4v-4h-4Zm0-105v4h4v-4h-4Zm-19.385 0-3.984-.358-.392 4.358h4.376v-4ZM516 257h4v-4h-4v4Zm-13.364 0v-4h-3.656l-.328 3.642 3.984.358ZM516 219v4h4v-4h-4Zm0-67h4v-4h-4v4Zm-9.948 67-3.984-.358-.392 4.358h4.376v-4Zm3.999-44.503 3.984.358.766-8.521-7.03 4.876 2.28 3.287Zm-29.606 15.017-1.306-3.781-2.205.761-.423 2.294 3.934.726ZM475.008 219v4h3.33l.604-3.275-3.934-.725Zm-7.006 38 3.934.725.871-4.725h-4.805v4Zm-12.352 67v4h3.33l.604-3.275-3.934-.725Zm-7.006 38 3.934.725.871-4.725h-4.805v4Zm-28.392 154v4h3.329l.604-3.275-3.933-.725Zm-165.428 0-3.614-1.715-2.713 5.715h6.327v-4Zm26.908-56.689 3.213-2.383-3.97-5.349-2.856 6.017 3.613 1.715Zm14.379-30.291-3.614-1.715-2.856 6.018 6.654-.307-.184-3.996Zm112.43-236.856 3.613 1.715 2.067-4.354-4.66-1.229-1.02 3.868Zm-21.117-7.713 1.713-3.615-3.03-1.436-1.943 2.732 3.26 2.319ZM362.851 219v4h2.064l1.196-1.682-3.26-2.318Zm-151.977 1.82-2.414-3.189 4.127 6.804-1.713-3.615ZM302.035 152v-4h-1.338l-1.069.805 2.407 3.195Zm22.907-37.902-3.802 1.243.809 2.474 2.589.263.404-3.98Zm-.467-1.461 3.818-1.193-1.384-4.431-4.178 2.023 1.744 3.601ZM321.659 114v4h.918l.826-.4-1.744-3.6Zm-49.942 24.187 1.743 3.6 3.019-1.462-.914-3.228-3.848 1.09Zm-192.83 93.388-3.765 1.352 1.504 4.187 4.004-1.939-1.744-3.6ZM4 219H0v4h4v-4Zm0-67.026.207-3.995L0 147.761v4.213h4Zm0-37.948H0v4.213l4.207-.219L4 114.026Zm0-8.526-.72-3.935-3.28.601v3.334h4Zm319.762-59.528.738 3.932 2.421-.455.684-2.367-3.843-1.11ZM345.991 4V0h-1.884l-1.2 1.453L345.991 4ZM516 4h4V0h-4v4Zm0 110v4h4v-4h-4ZM335.825 257l3.259 2.318 4.494-6.318h-7.753v4ZM204.69 225.501l3.011 2.633-5.426-5.822 2.415 3.189ZM75.194 324l-2.431-3.176L63.39 328h11.804v-4Zm-42.991 33.044 2.695-2.956-2.482-2.263-2.658 2.053 2.445 3.166ZM4 378.932l-2.462-3.153L0 376.98v1.952h4ZM4 516H0v4h4v-4Zm147.616 0v4h2.064l1.196-1.682-3.26-2.318Zm34.85-49 3.26 2.318L194.22 463h-7.754v4Zm27.027-38v4h2.064l1.196-1.682-3.26-2.318Zm47.653-67 3.259 2.318 4.494-6.318h-7.753v4Zm27.026-38v4h2.064l1.196-1.682-3.26-2.318ZM4 257v-4H0v4h4Zm22.387 0 1.744 3.6-1.744-7.6v4ZM4 267.842H0v6.382l5.743-2.782-1.743-3.6ZM516 512h-36.64v8H516v-8Zm-4-45v49h8v-49h-8Zm-28.237 4H516v-8h-32.237v8Zm-.419 45.358 4.403-49-7.968-.716-4.403 49 7.968.716Zm5.872-154.716-6.021 67 7.967.716 6.022-67-7.968-.716ZM516 358h-22.8v8H516v-8Zm4 71v-67h-8v67h8Zm-32.822 4H516v-8h-28.822v8ZM516 320h-19.385v8H516v-8Zm-4-63v67h8v-67h-8Zm-9.364 4H516v-8h-13.364v8Zm-2.037 63.358 6.021-67-7.968-.716-6.021 67 7.968.716ZM520 219v-67h-8v67h8Zm-13.948 4H516v-8h-9.948v8Zm.015-48.861-3.999 44.503 7.967.716 4-44.503-7.968-.716Zm-24.317 19.156a125.611 125.611 0 0 0 30.581-15.511l-4.56-6.574a117.562 117.562 0 0 1-28.632 14.523l2.611 7.562Zm-2.808 26.43 5.436-29.486-7.867-1.451-5.436 29.487 7.867 1.45ZM456 223h19.008v-8H456v8Zm-15 15c0-8.284 6.716-15 15-15v-8c-12.703 0-23 10.297-23 23h8Zm15 15c-8.284 0-15-6.716-15-15h-8c0 12.703 10.297 23 23 23v-8Zm12.002 0H456v8h12.002v-8Zm-8.418 71.725 12.352-67-7.867-1.45-12.353 67 7.868 1.45ZM380 328h75.65v-8H380v8Zm-15 15c0-8.284 6.716-15 15-15v-8c-12.703 0-23 10.297-23 23h8Zm15 15c-8.284 0-15-6.716-15-15h-8c0 12.703 10.297 23 23 23v-8Zm68.644 0H380v8h68.644v-8Zm-24.459 158.725 28.393-154-7.868-1.45-28.392 154 7.867 1.45ZM254.824 520h165.428v-8H254.824v8Zm23.295-62.404-26.909 56.689 7.227 3.43 26.909-56.688-7.227-3.431ZM297 463c-4.936 0-9.315-2.38-12.055-6.072l-6.425 4.767C282.704 467.333 289.424 471 297 471v-8Zm92 0h-92v8h92v-8Zm15-15c0 8.284-6.716 15-15 15v8c12.703 0 23-10.297 23-23h-8Zm-15-15c8.284 0 15 6.716 15 15h8c0-12.703-10.297-23-23-23v8Zm-92 0h92v-8h-92v8Zm-.705.016c.233-.011.468-.016.705-.016v-8c-.359 0-.717.008-1.073.025l.368 7.991Zm108.632-242.567-112.43 236.856 7.227 3.431 112.43-236.857-7.227-3.43Zm-19.217-2.384a125.933 125.933 0 0 0 21.81 7.967l2.041-7.736a117.773 117.773 0 0 1-20.424-7.46l-3.427 7.229Zm-19.599 33.253 24.572-34.549-6.519-4.637-24.572 34.55 6.519 4.636ZM219 223h143.851v-8H219v8Zm-6.413 1.435A14.923 14.923 0 0 1 219 223v-8c-3.512 0-6.851.79-9.839 2.206l3.426 7.229Zm87.041-75.63a52007.372 52007.372 0 0 0-91.168 68.826l4.828 6.379a51744.218 51744.218 0 0 1 91.153-68.815l-4.813-6.39ZM323 148h-20.965v8H323v-8Zm15-15c0 8.284-6.716 15-15 15v8c12.703 0 23-10.297 23-23h-8Zm-13.462-14.922c7.56.767 13.462 7.158 13.462 14.922h8c0-11.911-9.052-21.704-20.654-22.882l-.808 7.96Zm-3.881-4.249c.157.505.318 1.009.483 1.512l7.604-2.486a96.484 96.484 0 0 1-.451-1.411l-7.636 2.385Zm2.746 3.771 2.815-1.363-3.487-7.201-2.815 1.364 3.487 7.2ZM290 118h31.659v-8H290v8Zm-15 15c0-8.284 6.716-15 15-15v-8c-12.703 0-23 10.297-23 23h8Zm.565 4.097A15.026 15.026 0 0 1 275 133h-8c0 2.17.302 4.277.868 6.277l7.697-2.18ZM80.63 235.175l192.83-93.388-3.487-7.2-192.83 93.388 3.487 7.2ZM61 223c6.498 0 12.04 4.134 14.122 9.927l7.529-2.705C79.464 221.353 70.979 215 61 215v8Zm-57 0h57v-8H4v8Zm-4-71.026V219h8v-67.026H0ZM5 148c-.266 0-.53-.007-.793-.021l-.414 7.99c.4.021.802.031 1.207.031v-8Zm185 0H5v8h185v-8Zm15-15c0 8.284-6.716 15-15 15v8c12.703 0 23-10.297 23-23h-8Zm-15-15c8.284 0 15 6.716 15 15h8c0-12.703-10.297-23-23-23v8ZM5 118h185v-8H5v8Zm-.793.02c.262-.013.527-.02.793-.02v-8c-.405 0-.807.01-1.207.031l.414 7.989ZM0 105.5v8.526h8V105.5H0Zm323.024-63.46C226.48 60.159 87.161 86.196 3.279 101.566l1.442 7.869c83.9-15.373 223.235-41.413 319.779-59.53l-1.476-7.863Zm19.883-40.587c-10.432 12.63-18.347 27.344-22.988 43.41l7.686 2.22c4.328-14.984 11.715-28.724 21.47-40.536l-6.168-5.094ZM516 0H345.991v8H516V0Zm4 114V4h-8v110h8Zm-118 4h114v-8H402v8Zm-15 15c0-8.284 6.716-15 15-15v-8c-12.703 0-23 10.297-23 23h8Zm15 15c-8.284 0-15-6.716-15-15h-8c0 12.703 10.297 23 23 23v-8Zm114 0H402v8h114v-8ZM219 261h116.825v-8H219v8Zm-23-23c0 12.703 10.297 23 23 23v-8c-8.284 0-15-6.716-15-15h-8Zm5.678-15.131A22.925 22.925 0 0 0 196 238h8c0-3.781 1.394-7.227 3.701-9.866l-6.023-5.265ZM77.626 327.176c39.426-30.187 84.748-64.626 129.478-98.486l-4.829-6.378c-44.736 33.864-90.071 68.313-129.512 98.512l4.863 6.352ZM107 320H75.194v8H107v-8Zm23 23c0-12.703-10.297-23-23-23v8c8.284 0 15 6.716 15 15h8Zm-23 23c12.703 0 23-10.297 23-23h-8c0 8.284-6.716 15-15 15v8Zm-62 0h62v-8H45v8Zm-15.492-6A22.93 22.93 0 0 0 45 366v-8a14.932 14.932 0 0 1-10.102-3.912L29.508 360ZM6.462 382.084a6847.872 6847.872 0 0 1 28.186-21.874l-4.89-6.332a6801.946 6801.946 0 0 0-28.22 21.901l4.924 6.305ZM8 516V378.932H0V516h8Zm143.616-4H4v8h147.616v-8Zm31.591-47.318-34.851 49 6.52 4.636 34.85-49-6.519-4.636Zm3.259-1.682H146v8h40.466v-8ZM146 463c-8.284 0-15-6.716-15-15h-8c0 12.703 10.297 23 23 23v-8Zm-15-15c0-8.284 6.716-15 15-15v-8c-12.703 0-23 10.297-23 23h8Zm15-15h67.493v-8H146v8Zm111.886-73.318-47.653 67 6.52 4.636 47.652-67-6.519-4.636ZM170 366h91.146v-8H170v8Zm-23-23c0 12.703 10.297 23 23 23v-8c-8.284 0-15-6.716-15-15h-8Zm23-23c-12.703 0-23 10.297-23 23h8c0-8.284 6.716-15 15-15v-8Zm118.172 0H170v8h118.172v-8Zm44.393-65.318-47.652 67 6.519 4.636 47.652-67-6.519-4.636ZM4 261h22.387v-8H4v8Zm4 6.842V257H0v10.842h8ZM24.644 253.4 2.257 264.242l3.486 7.2L28.131 260.6l-3.487-7.2ZM32 425c-12.703 0-23 10.297-23 23h8c0-8.284 6.716-15 15-15v-8Zm25 0H32v8h25v-8Zm23 23c0-12.703-10.297-23-23-23v8c8.284 0 15 6.716 15 15h8Zm-23 23c12.703 0 23-10.297 23-23h-8c0 8.284-6.716 15-15 15v8Zm-25 0h25v-8H32v8ZM9 448c0 12.703 10.297 23 23 23v-8c-8.284 0-15-6.716-15-15H9Z"/>
                        <defs>
                            <linearGradient id="a" x1="260" x2="260" y1="4" y2="516" gradientUnits="userSpaceOnUse">
                                <stop stopColor="#F0EA9C"/>
                                <stop offset="1" stopColor="#F7C478"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    Lumina
                </Link>
            </div>
            {/* Center search bar */}
            <div className="flex-1">
                <div className="flex justify-center">
                    <div className="flex flex-row items-center gap-3 w-full max-w-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                            <path strokeLinecap="round" strokeLinejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                        </svg>
                        <input
                            type="text"
                            placeholder={"Search"}
                            value={searchText ? searchText : ""}
                            className="input input-bordered"
                            onChange={handleInputChange}
                        />
                        <div className="dropdown dropdown-hover">
                            <div tabIndex={0} role="button" className="btn btn-circle m-1">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className="w-5 h-5">
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                                </svg>
                            </div>
                            <ul tabIndex={0} className="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                                <li>
                                    <a onClick={() => handleOptionSelect('name')}>
                                        <LanguageIcon className="size-4"/>
                                        Name
                                    </a>
                                </li>
                                <li>
                                    <a onClick={() => handleOptionSelect('tag')}>
                                        <TagIcon className="size-4"/>
                                        Tag
                                    </a>
                                </li>
                                <li>
                                    <a onClick={() => handleOptionSelect('date')}>
                                        <CalendarIcon className="size-4"/>
                                        Date
                                    </a>
                                </li>
                                <li>
                                    <a onClick={() => handleOptionSelect('type')}>
                                        <DocumentIcon className="size-4"/>
                                        File Type
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {/* Theme Controller */}
            <label className="swap swap-rotate">
                {/* this hidden checkbox controls the state */}
                <input type="checkbox"
                       className="theme-controller"
                       value="dark"
                       checked={isDarkMode}
                       onChange={(e) => {
                           const newTheme = e.target.checked ? "dark" : "light";
                           localStorage.setItem("theme", newTheme);
                           document.documentElement.setAttribute("data-theme", newTheme);
                           setIsDarkMode(e.target.checked);
                       }}
                />

                {/* sun icon */}
                <svg
                    className="swap-off h-6 w-6 fill-current"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                >
                    <path
                        d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z" />
                </svg>

                {/* moon icon */}
                <svg
                    className="swap-on h-6 w-6 fill-current"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24">

                    <path
                        d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z" />
                </svg>
            </label>
        </div>
    );
}

export default NavBar;